JAVACLASSPATH=build:.:$IBIS_ROOT/classlibs:$IBIS_ROOT/build:$IBIS_ROOT/build/lib

export LD_ASSUME_KERNEL=2.2.5

#disable panda interrupte
#export IBP_NO_INTR=1

# fix panda/lfc flow control
#export LFC_SEND_COPY_ASIDE=1
#export PAN_SYS_CREDITS=65535

export LFC_INTR_FIRST=100
export IBP_SEND_SYNC=100 
export MANTA_NO_PANDA=1
export PAN_COMM_NO_IDLE_POLL=1

Dlibpath="-Dsun.boot.library.path=$IBIS_ROOT/build/lib:$JAVA_ROOT/jre/bin:$JAVA_ROOT/jre/lib/i386"

Dpool_host_num="-Dibis.pool.host_number=$1"
shift

Dprops="-Dibis.property.file=$IBIS_ROOT/properties"

#Dpool_total="-Dibis.pool.total_hosts=$1"
shift

if [ -z "$PRUN_ENV" ]
then
    Dns_pool="-Dibis.name_server.key=$1"
    shift
else
    Dns_pool="-Dibis.name_server.key=$PRUN_ENV"
fi

Dns_port="-Dibis.name_server.port=$1"
shift

Dns_server="-Dibis.name_server.host=$1"
shift

Dpool_total="-Dibis.pool.total_hosts=$1"
shift

$JAVA_ROOT/bin/java $Dlibpath $Dpool_host_num $Dprops  $Dpool_total $Dns_pool $Dns_port $Dns_server -Xmx1024M -Xbootclasspath/p:$JAVACLASSPATH -classpath $JAVACLASSPATH: "$@"
